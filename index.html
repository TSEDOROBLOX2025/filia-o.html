<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Brookasil RP â€“ Sistema</title>

<style>
body {font-family: Arial, sans-serif; background: #eef4f7; margin: 0;}
header {background: #0a7cff; color: #fff; padding: 20px; text-align: center;}
main {max-width: 1200px; margin: auto; padding: 20px;}
.box {background: #fff; padding: 20px; border-radius: 12px; margin-bottom: 25px;}
label {font-weight: bold; display: block; margin-top: 10px;}
input, select, textarea, button {width: 100%; padding: 8px; margin-top: 5px; border-radius:6px; border:1px solid #ccc;}
button {background: #0bb37b; color: #fff; border: none; cursor: pointer;}
button:hover {opacity: 0.9;}
.hidden {display: none;}
table {width: 100%; border-collapse: collapse; margin-top: 10px;}
th, td {border: 1px solid #ccc; padding: 6px; text-align: center;}
th {background: #0a7cff; color: #fff;}
/* Abas */
.tab-buttons {display: flex; gap: 10px; margin-bottom: 20px;}
.tab-buttons button {flex: 1; background: #0a7cff; color: #fff;}
.tab-buttons button.active {background: #0bb37b;}
.tab-content {display: none;}
.tab-content.active {display: block;}
</style>
</head>

<body>
<header><h1>ğŸ—³ï¸ Brookasil RP</h1></header>
<main>

<!-- ABAS -->
<div class="tab-buttons">
  <button class="active" onclick="abrirAba('filiacoesTab', this)">ğŸ“„ FiliaÃ§Ãµes</button>
  <button onclick="abrirAba('admTab', this)">ğŸ” Painel ADM</button>
  <button onclick="abrirAba('obrasTab', this)">ğŸ—ï¸ Obras</button>
</div>

<!-- FILIAÃ‡ÃƒO -->
<div id="filiacoesTab" class="tab-content active box">
<h2>ğŸ“„ FiliaÃ§Ã£o</h2>
<form id="formFiliacao">
<label>Nome completo</label>
<input id="nome" required>

<label>Data de nascimento</label>
<input type="date" id="nascimento" required>

<label>CPF (RP)</label>
<input id="cpf" type="number" inputmode="numeric" required>

<label>TikTok</label>
<input id="tiktok" required>

<label>Zona Eleitoral</label>
<select id="zona" required>
  <option value="">Selecione</option>
  <optgroup label="BH">
    <option>BH-01</option><option>BH-02</option><option>BH-03</option><option>BH-04</option>
    <option>BH-05</option><option>BH-06</option><option>BH-07</option><option>BH-08</option>
    <option>BH-09</option><option>BH-10</option><option>BH-11</option><option>BH-12</option>
    <option>BH-13</option><option>BH-14</option>
  </optgroup>
  <optgroup label="NC">
    <option>NC-01</option><option>NC-02</option><option>NC-03</option><option>NC-04</option>
    <option>NC-05</option><option>NC-06</option><option>NC-07</option><option>NC-08</option>
    <option>NC-09</option><option>NC-10</option><option>NC-11</option>
  </optgroup>
  <optgroup label="CT">
    <option>CT-01</option><option>CT-02</option><option>CT-03</option><option>CT-04</option>
    <option>CT-05</option><option>CT-06</option><option>CT-07</option><option>CT-08</option>
    <option>CT-09</option><option>CT-10</option><option>CT-11</option><option>CT-12</option>
  </optgroup>
  <optgroup label="FM">
    <option>FM-01</option><option>FM-02</option><option>FM-03</option><option>FM-04</option>
    <option>FM-05</option><option>FM-06</option><option>FM-07</option><option>FM-08</option>
    <option>FM-09</option><option>FM-10</option>
  </optgroup>
  <optgroup label="FX">
    <option>FX-01</option><option>FX-02</option><option>FX-03</option><option>FX-04</option>
    <option>FX-05</option><option>FX-06</option><option>FX-07</option><option>FX-08</option>
    <option>FX-09</option><option>FX-10</option><option>FX-11</option><option>FX-12</option>
    <option>FX-13</option><option>FX-14</option>
  </optgroup>
</select>

<label>Lado PolÃ­tico</label>
<select id="lado" required>
<option value="">Selecione</option>
<option>Direita</option>
<option>Centro</option>
<option>Esquerda</option>
</select>

<label>Partido</label>
<select id="partido" required></select>

<button type="submit">Confirmar</button>
</form>

<h2>ğŸ“Š EstatÃ­sticas</h2>
<table>
<thead><tr><th>Partido</th><th>Total</th></tr></thead>
<tbody id="contadorPartidos"></tbody>
</table>
<table>
<thead><tr><th>Zona</th><th>Total</th></tr></thead>
<tbody id="contadorZonas"></tbody>
</table>
</div>

<!-- PAINEL ADM -->
<div id="admTab" class="tab-content box">
<h2>ğŸ” Painel ADM</h2>
<input type="password" id="senhaAdm" placeholder="Senha">
<button onclick="entrarAdm()">Entrar</button>

<div id="areaAdm" class="hidden">
<p>Total de filiaÃ§Ãµes: <b id="total"></b></p>
<table>
<thead>
<tr><th>Nome</th><th>CPF</th><th>Zona</th><th>Partido</th><th>TikTok</th></tr>
</thead>
<tbody id="listaFiliados"></tbody>
</table>
</div>
</div>

<!-- OBRAS -->
<div id="obrasTab" class="tab-content box">
<h2>ğŸ—ï¸ Registrar Obra</h2>
<select id="cargoObra">
<option value="">Cargo</option>
<option>Prefeito</option>
<option>Governador</option>
<option>Presidente</option>
</select>
<input type="password" id="senhaObra" placeholder="Senha do cargo">
<input id="tituloObra" placeholder="TÃ­tulo">
<textarea id="descricaoObra" placeholder="DescriÃ§Ã£o"></textarea>
<input id="localObra" placeholder="Local">
<button onclick="registrarObra()">Registrar</button>

<h2>ğŸ“‹ Obras</h2>
<table>
<thead>
<tr><th>TÃ­tulo</th><th>Cargo</th><th>Local</th><th>DescriÃ§Ã£o</th><th>Data</th><th>AÃ§Ãµes</th></tr>
</thead>
<tbody id="listaObras"></tbody>
</table>
</div>

</main>

<!-- FIREBASE -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

<script>
firebase.initializeApp({databaseURL:"https://filiacao-rp-default-rtdb.firebaseio.com"});
const db = firebase.database();

/* PARTIDOS */
const lado = document.getElementById("lado");
const partido = document.getElementById("partido");

const partidos = {
  Direita: [
    "PL (22) â€“ Partido Liberal", "PP (11) â€“ Progressistas", "Republicanos (10) â€“ Republicanos",
    "PRTN (75) â€“ Partido Republicano Trabalhista Nacional", "Patriota (51) â€“ Patriota",
    "PRTB (28) â€“ Partido Renovador Trabalhista Brasileiro", "NOVO (30) â€“ Partido Novo",
    "PMB (35) â€“ Partido da Mulher Brasileira", "DC (27) â€“ Democracia CristÃ£",
    "UDB (38) â€“ UniÃ£o da Direita Brookasileira", "Agir (36) â€“ Agir", "POL (81) â€“ Partido da Ordem e Liberdade",
    "ACN (84) â€“ AlianÃ§a CristÃ£ Nacional", "PRONA (57) â€“ Partido da ReedificaÃ§Ã£o da Ordem Nacional",
    "PDC (17) â€“ Partido Democrata CristÃ£o", "PESP (48) â€“ Partido da EsperanÃ§a",
    "PMNL (86) â€“ Partido Militar Nacionalista"
  ],
  Centro: [
    "MDB (15) â€“ Movimento DemocrÃ¡tico Brasileiro", "UNIÃƒO (44) â€“ UniÃ£o Brasil",
    "PSD (55) â€“ Partido Social DemocrÃ¡tico", "Podemos (20) â€“ Podemos",
    "PSDB (45) â€“ Partido da Social Democracia Brasileira", "Cidadania (23) â€“ Cidadania",
    "Solidariedade (77) â€“ Solidariedade", "Avante (70) â€“ Avante", "PMN (33) â€“ Partido da MobilizaÃ§Ã£o Nacional",
    "PV (43) â€“ Partido Verde", "PUN (42) â€“ Partido da UniÃ£o Nacional",
    "MPD (37) â€“ Movimento Popular DemocrÃ¡tico", "PDM (26) â€“ Partido da MudanÃ§a",
    "MTB (63) â€“ Movimento Trabalhista Brookasileiro", "PTD (46) â€“ Partido Trabalhista DemocrÃ¡tico",
    "PDSD (88) â€“ Partido do Sindicato Democrata", "MSS (14) â€“ Partido MissÃ£o"
  ],
  Esquerda: [
    "PT (13) â€“ Partido dos Trabalhadores", "PSOL (50) â€“ Partido Socialismo e Liberdade",
    "PCdoB (65) â€“ Partido Comunista do Brasil", "Rede (18) â€“ Rede Sustentabilidade",
    "PDT (12) â€“ Partido DemocrÃ¡tico Trabalhista", "UP (80) â€“ Unidade Popular",
    "PCO (29) â€“ Partido da Causa OperÃ¡ria", "PCB (21) â€“ Partido Comunista Brasileiro",
    "PSTU (16) â€“ Partido Socialista dos Trabalhadores Unificado", "PPL (54) â€“ Partido PÃ¡tria Livre",
    "PSB (40) â€“ Partido Socialista Brasileiro", "PFS (60) â€“ Partido da Frente Socialista",
    "PS (56) â€“ Partido Socialista", "PSTN (31) â€“ Partido Social Trabalhista Nacional"
  ]
};

lado.onchange = () => {
  partido.innerHTML = "<option value=''>Selecione</option>";
  (partidos[lado.value] || []).forEach(p => partido.innerHTML += `<option>${p}</option>`);
};

/* FILIAÃ‡ÃƒO */
formFiliacao.onsubmit = e => {
  e.preventDefault();
  db.ref("filiacoes").push({
    nome: nome.value,
    nascimento: nascimento.value,
    cpf: cpf.value,
    tiktok: tiktok.value,
    zona: zona.value,
    partido: partido.value
  });
  formFiliacao.reset();
};

/* LEITURA + ESTATÃSTICAS */
db.ref("filiacoes").on("value", s => {
  const d = s.val() || {};
  let p={}, z={}, totalG=0;
  contadorPartidos.innerHTML="";
  contadorZonas.innerHTML="";
  listaFiliados.innerHTML="";
  Object.values(d).forEach(f=>{
    totalG++;
    p[f.partido]=(p[f.partido]||0)+1;
    z[f.zona]=(z[f.zona]||0)+1;
    listaFiliados.innerHTML += `<tr>
      <td>${f.nome}</td><td>${f.cpf}</td><td>${f.zona}</td><td>${f.partido}</td><td>${f.tiktok}</td>
    </tr>`;
  });
  for(let k in p) contadorPartidos.innerHTML += `<tr><td>${k}</td><td>${p[k]}</td></tr>`;
  for(let k in z) contadorZonas.innerHTML += `<tr><td>${k}</td><td>${z[k]}</td></tr>`;
  total.textContent = totalG;
});

/* ADM */
let admLogado = false;
function entrarAdm() {
  if(senhaAdm.value === "Brookasil1234") {
    areaAdm.classList.remove("hidden");
    admLogado = true;
  }
}

/* OBRAS */
const SENHAS = {Prefeito:"popo30", Governador:"caiado44", Presidente:"henrique44"};
function registrarObra(){
  if(SENHAS[cargoObra.value] !== senhaObra.value) return alert("Senha errada");
  db.ref("obras").push({
    cargo: cargoObra.value,
    titulo: tituloObra.value,
    descricao: descricaoObra.value,
    local: localObra.value,
    data: new Date().toLocaleDateString("pt-BR")
  });
}

db.ref("obras").on("value", s => {
  listaObras.innerHTML = "";
  Object.entries(s.val() || {}).forEach(([id,o])=>{
    listaObras.innerHTML += `<tr>
      <td>${o.titulo}</td><td>${o.cargo}</td><td>${o.local}</td><td>${o.descricao}</td><td>${o.data}</td>
      <td>${admLogado?`<button onclick="db.ref('obras/${id}').remove()">ğŸ—‘ï¸</button>`:""}</td>
    </tr>`;
  });
});

/* ABAS */
function abrirAba(id, btn){
  document.querySelectorAll(".tab-content").forEach(c => c.classList.remove("active"));
  document.querySelectorAll(".tab-buttons button").forEach(b => b.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  btn.classList.add("active");
}
</script>
</body>
</html>
